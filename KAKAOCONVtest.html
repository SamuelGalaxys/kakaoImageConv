<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>카톡테마 이미지 변환기s</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        #kingButton {
            background-color: #007bff; /* 파란색 */
            color: white; /* 텍스트 색상 */
            border: none; /* 테두리 없음 */
            padding: 10px 20px; /* 내부 여백 */
            font-size: 16px; /* 글꼴 크기 */
            cursor: pointer; /* 커서 모양 */
            border-radius: 4px; /* 둥근 테두리 */
        }
        #drop-area {
            border: 2px dashed #b4e5bc;
            padding: 20px;
            text-align: center;
        }
        #drop-area.highlight {
            background-color: #b4e5bc;
        }
    </style>
</head>
<body>
    <strong style="font-size: 30px;"> KakaoImage_Convert KHS</strong>
    <br><br>
    <button id="kingButton" onclick="downloadAllImages()">The King :: All download</button>
    <br><br><br>

    <!-- Form examples -->
    <form id="image-form0">
        <div id="drop-area0">
            <input type="file" id="image-input0" multiple>
            <p>채팅창하단바BG</p>
            <img src="demores/theme_maintab_cell_image.png" style="width: 60px; height:auto;">
        </div>
        <button type="button" onclick="uploadImage(0)">Upload</button>
    </form>

    <!-- Add similar forms for other images as in your original code -->
    <!-- 예시 -->
    <form id="image-form1">
        <div id="drop-area1">
            <input type="file" id="image-input1" multiple>
            <p>기타 이미지</p>
            <img src="demores/theme_maintab_cell_image.png" style="width: 60px; height:auto;">
        </div>
        <button type="button" onclick="uploadImage(1)">Upload</button>
    </form>

    <!-- 아래의 형식대로 나머지 폼들도 추가 -->

    <script>
        const formIds = [
            '0', '1', /* 나머지 form id들 */
        ];

        function downloadAllImages() {
            var zip = new JSZip();
            var count = 0;
            var totalFiles = 0;

            formIds.forEach(function(formId) {
                var input = document.getElementById('image-input' + formId);
                if (input && input.files.length > 0) {
                    totalFiles += input.files.length;
                    for (var i = 0; i < input.files.length; i++) {
                        var file = input.files[i];
                        var reader = new FileReader();

                        reader.onload = function(e) {
                            var img = new Image();
                            img.src = e.target.result;
                            img.onload = function() {
                                var canvas = document.createElement('canvas');
                                var ctx = canvas.getContext('2d');
                                
                                // 각 이미지의 크기와 이름을 설정합니다.
                                var width, height, newName;
                                switch (formId) {
                                    case '0':
                                        width = 114; height = 114;
                                        newName = 'theme_maintab_ico_more_image.png';
                                        break;
                                    case '1':
                                        width = 200; height = 200;
                                        newName = 'other_image.png';
                                        break;
                                    // 추가 폼들에 대한 크기와 이름 설정
                                    default:
                                        width = img.width;
                                        height = img.height;
                                        newName = file.name;
                                        break;
                                }

                                canvas.width = width;
                                canvas.height = height;
                                ctx.drawImage(img, 0, 0, width, height);
                                var resizedImg = canvas.toDataURL('image/png').split(',')[1];
                                zip.file(newName, resizedImg, {base64: true});
                                count++;

                                if (count === totalFiles) {
                                    zip.generateAsync({type: "blob"}).then(function(content) {
                                        saveAs(content, "KakaoImgConv.zip");
                                    });
                                }
                            };
                        };
                        reader.readAsDataURL(file);
                    }
                }
            });

            if (totalFiles === 0) {
                alert("No images to download.");
            }
        }

        function uploadImage(formIndex) {
            var input = document.getElementById('image-input' + formIndex);
            if (input.files.length > 0) {
                // Handle the file upload here if needed
                alert('Image uploaded for form ' + formIndex);
            } else {
                alert('No image selected for form ' + formIndex);
            }
        }
    </script>
</body>
</html>
